<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to RAP</title>
    <meta charset="utf-8" />
    <meta name="author" content="Statistics Development Team, DfE" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to RAP
## Cam Race
### Statistics Development Team, DfE
### 2021/07/13

---







# What I'll cover

--

- What is RAP

???

High level overview and try to break through some of the jargon

--

- Why we should care

???

I mean, if you're not starting with what and why you're probably doing something wrong!

--

- RAP in DfE

???

Go over some of the things we've done in our department, as an example of what it looks like in practice

--

- How to get involved

???

Also places to learn more, wherever you are in government

--

- Time for questions

???

Happy for you to wait until the end with questions

Though feel free to put any questions in the chat as we go along

---
layout: true

# What is RAP?

---

???

It's a classic government jargon-y acronym that I can't stand

What do people actually mean when they talk about RAP?

--

A guide to making our data analysis processes the best they can be

???

It boils down to doing all the things we already do, in the best way we can

Heavily leans on ideas and best practice in software engineering

Forms a best practice framework for any data analysis or processing that we do

--

Key principles:

--

- Use code where possible to minimise manual steps

???

I could give a thousand reasons why this a good idea, and will get into some of those shortly

--

- Document within the process itself

???

Using code makes this easy

--

- Use open source languages

???

Generally this is going to be Python and R

--

- Keep a version control audit trail

???

Use git to track changes to code and keep a history over time

--

- Collaborate

???

If we're using open code, with clear version control, we can collaborate far more

Best example is hosting code on GitHub, online platform where you can store your code and use git to track changes

Peer review, share resources and solutions, and work together all of government and all of the analytical professions

---

It's an acronym:

???

Zoom out for notes

--

- **R**eproducible

???

Same analysis, same data, same result - this should be the minimum we expect from any process

--

- **A**nalytical

???

Easy one, almost all work we do is analytical

We're taking some data, examining it and then presenting it

--

- **P**ipelines

???

The process itself, package it up so that something goes in one end of the pipe and comes out the other

Imagine you have a farm and in that farm you have a tank full of water you want to move from your main yard to a trough in a sheep field about a mile away

You wouldn't get a load of different people to carry it across in buckets

You wouldn't just dump it in a field and expect it to slowly seep its way to point B

You also wouldn't take the full tank with you and dump it all in the trough, you'd waste a tonne of effort and water

You'd build a pipe to take it from point A to point B

This pipe is what we want our analysis to be like:

- Efficient
- Neatly contained
- Easy to reuse
- Easy to understand where it starts and ends
- Easy to re-purpose or adapt (can branch off to troughs in other fields, using some of the pipe you've already built)

When you think of RAP, this is how we should be framing our processes, as pipes going from point A to point B

---
layout: true

# Why we should care

---

???

I'll be blunt, as government statisticians it's our job to care...

--

Code of practice:

--

- Quality 2: Sound methods

&gt; Producers of statistics and data should use the best available methods and recognised standards, and be open about their decisions.

???

This is that openness principle, open source code that anyone can use, and also writing that code in the open on places like GitHub

By open I mean publicly accessible

There's obviously certain things we can't expose for sensitivity reasons, though there's ways to protect those, and the main code can and should nearly always be made public

---

Code of practice:

- Quality 2.1

&gt; Methods and processes should be based on national or international good practice, scientific principles, or established professional consensus.

???

RAP is our international framework for guiding us on best practice in data processing and analysis

It's the established consensus, based on decades of software engineering best practice

---

Code of practice:

- Quality 3: Assured quality

&gt; Producers of statistics and data should explain clearly how they assure themselves that statistics and data are accurate, reliable, coherent and timely.

???

Comes back to openness again

By using code for our processes, we document them clearly and in an easily reproducible manner

---

Code of practice:


- Value 4.5

&gt; Statistics producers should keep up to date with developments that might improve methods and quality.

???

By engaging in RAP you are getting involved with developments that can improve the quality of your analysis

---

Code of practice:

- Trustworthiness 4.4 

&gt; Good business practices should be maintained in the use of resources. Where appropriate, statistics producers should take opportunities to share resources and collaborate to achieve common goals and produce coherent statistics.

???

Take that bigger picture view

Be leaders in government statistics, influence improvements across GSS

By using code and open source software for our processes we can then share examples and work more collaboratively

Making use of Slack/GitHub/Cross gov meet ups etc

That isn't even all of the bits of the code of practice either

RAP helps us to do better in all 3 pillars of Quality, Trustworthiness and Value

Wherever you are, whatever you're doing I'd strongly recommend you champion RAP principles

---

Is a cross-government movement 

--

- RAP Champions 

???

Network of analysts from all departments, working to implement and champion these principles and share knowledge

I'm one of the champions for DfE, and we actually have one of our meet ups tomorrow

--

- GSS best practice guidance

???

Features heavily throughout

--

- Office for Statistics Regulation

&gt; We recommend that steps are taken within the Government Statistical Service and Analysis Function to promote and support increased use of RAP. We want to see RAP become the default approach to producing official statistics.

???

Have also said that they'll be including RAP when they assess the badging of publications

So if you're ever involved in trying to get a publication badged as national statistics, expect to be asked about RAP

---

It brings us numerous benefits to our processes:


--

- More accurate

???

Manual steps in production and quality assurance introduce human error â€“ everybody makes mistakes

--

- More reproducible

???

Gives us trust in our processes

--

- More efficient

???

Computers can do a lot of the leg work much quicker than we can

Allows us to rerun at the last minute or after minor tweaks (both happen, a lot)

--

- More reliable

???

Another benefit to minimising human errors, giving you that trust that you're going to get the same result time after time

--

- Better documented

???

Remember, automating something documents it!

--

- Greater consistency

???

Using open-source code makes it far easier to break out of the silos we often work in and share resources more

Can make use of template code and save duplication of effort

--

- Fewer key person dependencies

???

Means we can be more flexible as a profession

Helps prevent people from getting stuck in a role because the team can't afford to lose them, which I've sadly seen happen

Helps teams cope if someone gets hit by a bus

EES, Software Developer, only reason we managed to get through without a drastic impact on our service was because software development follows these practices

---

It's better for us as analysts:

???

If I haven't made it clear enough just there, it really does improve our quality of life

Is very much an opportunity for us to grab and get excited about

--

- Frees up our time

???

Gives us more opportunities to break out of the grind and do things that we want to do

--

- Personal development

???

Provides lots of scope for learning and development

Skills and knowledge that will help you for years to come whether you stay in stats or not

--

- More fun than the alternative...

???

If you've ever spent hours trying to get data through a series of excel spreadsheets that keep crashing on you

Or even hours waiting on an SPSS process that crashes and needs starting again from scratch you'll know what I mean

If you haven't experienced something like that, you're one of a very lucky few

---
layout: true

# RAP in DfE

---

Principles:

???

We've set some more specific principles, and also broken it down in a checklist to make it easier for analysts to implement

--

All data sources for a publication should be stored in the same database

???

This is about defining the scope, and making that starting point clear

Data often comes from a variety of sources and getting them together makes our lives much easier

--

Data is processed using reproducible code, with no manual steps

???

No copy/paste, no point and click

End goal is for one button to run the code and all of the files for a publication are produced

--

Files should be appropriately version controlled

???

Starts out as a basic folder/file structure and towards the top end of RAP involves using git to help you track changes

Both data files and code files

Tracking when and what changes are made makes a huge difference

Saves us time trying to go back over things to work out what has happened

Helps us to simultaneously collaborate on the same code more efficiently

--

Output files should match the data standards

???

This is defining that end goal for the pipeline

For us we've set a standard across the whole of DfE, based on tidy data principles

If you're not familiar with tidy data, look it up, I'd recommend following it where you can (you might find you're already doing it to some extent!)

---

An example statistics production pipeline before:

.center[![Overview of SEN2 before](examples/RAP-Process-Before.png)]

???

This is a publication that we've recently worked on

Quite a few of these steps are manual and undocumented

Walk through diagram

---

An example statistics production pipeline after:

.center[![Overview of SEN2 after](examples/RAP-Process-After.png)]

???

More streamlined, much easier and more reliable to rerun if something needs amending at the last minute

All of this is done from one click of a button

---

Best practice levels

.center[![Hexagons breaking down RAP to real world examples](examples/RAP-in-practice.png)]

???

We've broken RAP into small chunks to make it easier for analysts to engage with

Rather than talk through these here, I'll show you these hexagons in action

Jump to self-assessment tool

Walk through it

Then show guidance website

Then come back to the presentation

---
layout: true

# Software

---

???

Included a slide just for how we approach this in DfE as it's the bit that most often gets questions

--

RAP is software agnostic, it doesn't specify a tool to use, however, there are two guiding principles that narrow it down:

--

- Needs to be a code language

???

Code is literally writing instructions for our computer that it can follow

This means to avoid tools wheres there's lots of manual pointing and clicking - these require documentation alongside and are more time consuming to use

Using code allows us to both document and automate at the same time

--

- Should be open source

???

Open source essentially means free, open and accessible. This is the opposite of proprietary products such as Microsoft Excel or SPSS that you need to pay for and the software is private

---

As an example in official statistics we need to:

--

- Query databases

--

- Match, transform and analyse data

--

- QA our data and processing

--

- Version control this


---

Therefore we recommend the following tools:

--

- Use R or SQL to query databases

???

We allow SQL here as all of our data is in SQL databases and a lot of our analysts know SQL better than R

Also works well because they can write scripts in SQL and then run them via R

--

- Use R to match, transform and analyse data

???

Packages such as dplyr and tidyr are fantastic here

--

- Use R to QA our processes

???

Often we'll get our pipelines to spit out rmarkdown reports on QA checks

These checks are both pass/fail ones and also visualisations like scatter plots to help us sense check the data

--

- Use Git to version control this

???

Git is the best version control software available, and is widely used across data science and software development

It's relatively straightforward once you've used it a bit

If you ever hit a problem just google it, there's tonnes of guidance out there

---
layout: true

# How to get involved

---

--

Champion the principles of it in your work:

--

- Avoid manual processes

--

- Automate and document everything you can

--

- Use open source software (learn Python and/or R)

???

Don't just learn, actively try to do your work in it

--

- Version control (learn Git)

???

Same here, learn and actively use Git

Once you use Git you ever won't go back

--

- Work in the open

???

Share your work with others

Ask for opinions and advice on what you're doing

Encourage collaboration

These all apply no matter where you're working or what you're working on

---

Get involved in cross government slack:

- https://govdatascience.slack.com/ &gt; #rap_collaboration

???

Would recommend joining the cross gov slack channel, usually a mix of interesting discussions there, and a fantastically knowledgeable community for answering any questions you might have about coding

Also a GSS slack, and a number of other Slack workspaces that you can get involved in

--

GSS RAP website: 

- https://gss.civilservice.gov.uk/reproducible-analytical-pipelines/

???

Link is there but you can find just by googling GSS RAP

Contains more information, including for finding the RAP champion/s in you department

RAP Champions will be a great source of knowledge for resources in your department

They will also be your best contact to try to help you get the tools you need in your department

Show how to find your RAP champion

--

Agreed MVP for RAP on GitHub:

- https://github.com/best-practice-and-impact/rap_mvp_maturity_guidance/blob/master/Reproducible-Analytical-Pipelines-MVP.md

???

This is what everything I've said today is based from and is the main agreed definition of what RAP looks like

---

DfE guidance website: 

- https://dfe-analytical-services.github.io/stats-production-guidance-copy/

???

Good for RAP and an example of how to apply RAP in a specific department

Good for a wealth of resources that might be useful for learning R and Git

--

AQUA Book: 

- https://www.gov.uk/government/publications/the-aqua-book-guidance-on-producing-quality-analysis-for-government

???

Contains the main standards for quality assurance across government

Something you should try to get familiar with if you're not already

--

The Duck Book:

- https://best-practice-and-impact.github.io/qa-of-code-guidance/intro.html

???

Well, it's actual title is: Quality Assurance of Code for Analysis and Research

But that acronym spells QACAR and it's designed to sit on top of the AQUA book, so it's the Duck book

Really useful resource, constantly developing and covers all kinds of parts of coding and RAP to more advanced levels

---
layout: true
class: center, middle

# Thanks!

---

Made with [xaringan](https://bookdown.org/yihui/rmarkdown/xaringan.html) package in R

Slides: https://cjrace.github.io/introduction-to-rap-2/#1

cameron.race@education.gov.uk

???

This was made with R, using the xaringan package, which is an extension for making slides using rmarkdown.

I'd really recommend you check it out, as the amount of flexibility is incredible, and the keyboard shortcuts are really nice when presenting

Slides are available on GitHub

Happy to take questions now, though if after this session you do have any questions about RAP, or anything I've mentioned, feel free to get in touch
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
